<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Gestore di Finanze Personali</title>
</head>
<body>
    <h2>Registrazione Utente</h2>
    <form id="registerForm">
        Username: <input type="text" name="username" required><br>
        Password: <input type="password" name="password" required><br>
        <button type="submit">Registrati</button>
    </form>

    <h2>Aggiungi Transazione</h2>
    <form id="transactionForm">
        User ID: <input type="text" name="user_id" required><br>
        Amount: <input type="number" name="amount" required><br>
        Type: <select name="type">
            <option value="income">Income</option>
            <option value="expense">Expense</option>
        </select><br>
        Category ID: <input type="text" name="category_id" required><br>
        Account ID: <input type="text" name="account_id" required><br>
        Description: <input type="text" name="description" required><br>
        <button type="submit">Aggiungi Transazione</button>
    </form>

    <h2>Visualizza Transazioni</h2>
    User ID: <input type="text" id="userId" required>
    <button onclick="getTransactions()">Visualizza Transazioni</button>
    <div id="transactions"></div>

        <h1>Dashboard di Finanze Personali</h1>

    <h2>Report Mensile di Spesa</h2>
    <button onclick="fetchAndDisplay('/report/monthly_spending', 'monthlySpendingResults')">Mostra Report Mensile</button>
    <div id="monthlySpendingResults"></div>

    <h2>Analisi Categorie</h2>
    <button onclick="fetchAndDisplay('/report/category_analysis', 'categoryAnalysisResults')">Mostra Analisi Categorie</button>
    <div id="categoryAnalysisResults"></div>

    <h2>Trend di Spesa</h2>
    <button onclick="fetchAndDisplay('/report/spending_trends', 'spendingTrendsResults')">Mostra Trend di Spesa</button>
    <div id="spendingTrendsResults"></div>

    <script>
    function fetchAndDisplay(url, elementId) {
        fetch(url)
            .then(response => response.json())
            .then(data => {
                const container = document.getElementById(elementId);
                container.innerHTML = '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
            })
            .catch(error => console.error('Error fetching data:', error));
    }
    </script>

    <script src="app.js"></script>
</body>
</html>
